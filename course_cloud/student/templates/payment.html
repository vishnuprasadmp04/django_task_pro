<!doctype html>
<html lang="en">
    <head>
        <title>Title</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"
        ></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"
        >
        </script>

</head>

    <body>
        <div class="justify-center items-center px-4 py-4 bg-white shadow-md rounded-2xl">
            <div>
                Total Amount : <span>{{data.display_amount}}</span>
            </div>
            <div>
                Razor Pay ID : <span>{{data.razr_pay_id}}</span>
            </div>
            <div>
                    <button class="px-4 py-3" style="background-color: rgb(06, 79,205);border-radius: 30px;color: aliceblue;" id="rzp-button1">
                        Pay with Razorpay
                    </button>
            </div>
        </div>
    </body>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
var options = {
    "key": "{{data.razr_key_id}}",
    "amount": "{{data.amount}}",
    "currency": "INR",
    "name": "COURSE CLOUD",
    "description": "Test Transaction",
    "order_id": "{{data.razr_pay_id}}",

    "handler": function (response){

        // create form dynamically
        var form = document.createElement("form");
        form.method = "POST";
        form.action = "/student/verify/";

        // CSRF token
        var csrf = document.createElement("input");
        csrf.type = "hidden";
        csrf.name = "csrfmiddlewaretoken";
        csrf.value = "{{ csrf_token }}";

        var order_id = document.createElement("input");
        order_id.type = "hidden";
        order_id.name = "razorpay_order_id";
        order_id.value = response.razorpay_order_id;

        var payment_id = document.createElement("input");
        payment_id.type = "hidden";
        payment_id.name = "razorpay_payment_id";
        payment_id.value = response.razorpay_payment_id;

        var signature = document.createElement("input");
        signature.type = "hidden";
        signature.name = "razorpay_signature";
        signature.value = response.razorpay_signature;

        form.appendChild(csrf);
        form.appendChild(order_id);
        form.appendChild(payment_id);
        form.appendChild(signature);

        document.body.appendChild(form);
        form.submit();
    }
};

var rzp1 = new Razorpay(options);

document.getElementById('rzp-button1').onclick = function(e){
    rzp1.open();
    e.preventDefault();
}
</script>

</html>